**Рамки:** Информационная система автоматизации поликлиники.

**Уровень:** Задача, определенная пользователем (учёт пациента).

**Основной исполнитель:**: Администратор.

**Заинтересованные лица и их требования:**

* Администратор: Хочет быстро и корректно внести, обновить или архивировать данные пациента. Требует однозначных правил для работы и отсутствия дублирования записей.

* Пациент: Хочет получить доступ к медицинским услугам при постановке на учёт и быть информированным об изменении своего статуса. Ожидает своевременных уведомлений.

* Информационная система: Требует поддержания целостности, актуальности и согласованности данных о пациентах. Должна автоматически исполнять правила постановки/снятия с учёта.

* Медицинская организация: Требует надежного хранения информации, чёткого разграничения активных и архивных карт, соответствия нормативам ведения учёта.

* Лечащий врач: Заинтересован в актуальном списке своих пациентов и наличии активной медицинской карты для ведения истории болезни.

**Предусловия:**

* Пациент зарегистрирован в системе (объект Patient существует или данные для его создания предоставлены).

* Для постановки имеется основание (направление, заявление).

* Для снятия пациент имеет статус "На учёте" и имеется основание (окончание срока, документ).

* Администратор вошёл в систему и имеет необходимые права.

**Постусловия:**

* При постановке: Создана или активирована медицинская карта пациента. Статус пациента изменён на "На учёте". Пациенту отправлено уведомление о постановке.

* При снятии: Статус пациента изменён на "Снят с учёта". Медицинская карта переведена в архив. Пациенту отправлено уведомление о снятии.

* Данные об операции (дата, основание, категория, причина) сохранены в учётной записи пациента.



** Основной успешный сценарий:**

**4.1 Успешный сценарий постановки на учёт:**

1. Администратор или Информационная система инициирует процесс постановки пациента на учёт.

2. Администратор проверяет предоставленные данные пациента.

3. Администратор выбирает категорию и тип учёта, присваивает пациенту соответствующий статус.

4. Информационная система создаёт новую или активирует существующую медицинскую карту пациента.

5. Система вносит в медицинскую карту запись о постановке на учёт с указанием даты, основания и категории.

6. Система автоматически отправляет Пациенту уведомление об успешной постановке на учёт.


**4.2 Успешный сценарий снятия с учёта:**

1.Администратор (на основании документа) или Информационная система (по истечении срока учёта) инициирует процесс снятия с учёта.

2. Администратор подтверждает операцию, указывая причину снятия.

3. Информационная система изменяет статус пациента на "Снят с учёта".

4. Система переводит медицинскую карту пациента в архивное состояние.

5. Система автоматически отправляет Пациенту уведомление о снятии с учёта.


**Расширения (альтернативные потоки и исключения):**

*a. Общие исключения:*

1. Сбой в работе информационной системы:
 Операция прерывается, все участники получают уведомление об ошибке.
 Данные остаются в неизменном состоянии.

2. Отсутствие необходимых прав у администратора:
 Система отклоняет запрос и уведомляет администратора о недостатке полномочий.

*b. Исключения при постановке на учёт:*

1. Некорректные или неполные данные пациента:
 Система отклоняет запрос.
 Система отображает администратору сообщение с указанием на ошибки для их исправления.

2. Пациент уже состоит на учёте:
 Система уведомляет администратора о текущем статусе пациента.
 Система не создаёт дублирующую запись.

*c. Исключения при снятии с учёта:*

1. Пациент не состоит на учёте:
Система уведомляет администратора о том, что операция невозможна.

2. Попытка снять с учёта пациента с активным курсом лечения:
Система блокирует операцию.
Система требует подтверждения от лечащего врача или указания веской причины.

*3a. Если администратор передумал проводить операцию (отмена в процессе):*
Администратор отменяет операцию в системе.
Система возвращает все данные в исходное состояние.

*4a. Если система не может отправить уведомление пациенту (некорректные контакты, сбой сервиса):*
Система фиксирует ошибку отправки в журнале.
Администратор получает предупреждение о необходимости связаться с пациентом иным способом.

**Специальные требования:**

* Целостность данных: Система должна гарантировать, что статус "На учёте" всегда соответствует активной медицинской карте, а "Снят с учёта" — архивной. Запрещены противоречивые состояния.

* Автоматизация: Система должна самостоятельно инициировать процесс снятия с учёта по истечении установленного срока без вмешательства администратора.

* Защита данных: Доступ к изменению учётного статуса пациента осуществляется только авторизованными администраторами. Все действия по изменению статуса должны протоколироваться.

* Интуитивный интерфейс: Интерфейс для администратора должен обеспечивать быстрый поиск пациента, простой выбор категории учёта из справочника и подтверждение операций минимальным количеством кликов.

* Интеграция: Система должна иметь возможность получать данные для автоматической постановки на учёт из смежных систем (например, из системы регистратуры по направлению врача).

**Список технологий и типов данных:**

* Идентификация пациента: по уникальному ID (СНИЛС, полис ОМС, номер карты), ФИО и дате рождения.

* Аутентификация администратора: по логину/паролю с повышенным уровнем прав.

* Данные учёта: категория и тип учёта выбираются из обязательного справочника; основание (направление, заявление) прикрепляется в виде ссылки на документ или текстового поля.

* Подтверждение операции: критичные операции (особенно снятие) требуют обязательного электронного подтверждения (аналог подписи) администратора.

* Частота использования: Постоянно, но менее интенсивно, чем приём врача. Пиковые нагрузки связаны с началом/окончанием периодов диспансеризации.

**Открытые вопросы:**
1. Определить и формализовать полный перечень оснований для автоматического снятия с учёта (истечение срока, изменение места жительства, смерть) и источники данных для их проверки.

2. Разработать и утвердить регламент процедуры восстановления на учёте пациента, снятого по ошибке, определив, восстанавливается ли архивная запись или создаётся новая.

3. Установить необходимость и регламент получения физического (бумажного) подтверждения операций постановки/снятия с учёта с подписью пациента.

4. Формализовать правила назначения и изменения категорий учёта, а также определить возможность нахождения одного пациента на нескольких типах учёта одновременно.

5. Определить порядок интеграции процессов учёта с системой оплаты медицинских услуг, в частности, блокировку оказания платных услуг пациентам со статусом "Снят с учёта".

6. Установить нормативные сроки и форматы хранения архивных медицинских карт пациентов.

7. Определить каналы уведомлений пациентов (SMS, email, печатная форма) как обязательные и закрепить это в регламенте.

8. Утвердить требования к производительности системы, в частности, максимальное время отклика для операций постановки и снятия с учёта.


